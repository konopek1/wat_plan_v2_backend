{"version":3,"sources":["helper.ts","Table.ts","DatePiceker.ts","Input.ts","main.ts"],"names":[],"mappings":";AA+BC,aA3BD,SAAS,EAAO,GACL,OAAA,KAAK,MAAM,EAAK,UAAY,OAGvC,SAAS,EAAQ,EAAY,GACnB,IAAA,EAAS,IAAI,KAAK,GAEjB,OADP,EAAO,QAAQ,EAAO,UAAY,GAC3B,EAGX,SAAgB,IACN,IAAA,EAAW,EAAO,IAAI,MACtB,EAAY,EAAO,QAAA,YAClB,OAAA,KAAK,OAAO,EAAW,GAAa,GAG/C,SAAgB,EAAgB,GACtB,IAAA,GAAe,EACf,EAAY,EAAQ,QAAA,WAAyB,EAAb,GAChC,EAAU,EAAQ,QAAA,WAA+B,GAAlB,EAAa,IACxC,OAAA,EAAe,GAAU,MAAM,EAAe,GAG5D,SAAS,EAAe,GACd,IACA,EADQ,EAAK,cAAc,MAAM,KAAK,GAAG,MAAM,GAC/C,MAAA,KAAC,EAAA,EAAA,GACG,OADA,EAAA,GACE,IAAI,EACnB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IA/BY,QAAA,SAAW,yCAEX,QAAA,WAAa,IAAI,KAAK,KAAM,EAAG,IAY5C,QAAA,cAAA,EAMA,QAAA,gBAAA;;ACfA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAJA,IAAA,EAAA,QAAA,YAEM,EAAO,CAAC,eAAe,SAAS,QAAQ,WAAW,SAAS,SAAS,aAE3E,EAAA,WAQI,SAAA,EAAY,EAAc,EAAkB,GACnC,KAAA,KAAO,EACP,KAAA,UAAY,EACZ,KAAA,OAAS,EACT,KAAA,SA8Bb,OA3BI,EAAA,UAAA,OAAA,WAKS,IAJD,IAAA,EAAQ,EACN,EAAK,SAAC,GAA4B,MAAA,oBAAoB,EAAK,SAE7D,EAAU,GACL,EAAI,EAAG,EAAI,KAAK,KAAK,OAAS,EAAG,GAAK,EAAG,CAEzC,IADD,IAAA,EAAM,GACD,EAAI,EAAG,EAAI,EAAG,IAAK,CAClB,IAAA,EAAS,KAAK,KAAK,EAAI,GAC7B,GAAO,EAAM,EAAO,MAAK,sBAAsB,EAAO,MAAK,SAE/D,GARoC,qBAQtB,EAAG,EAAK,IAAQ,GAR+B,QAS7D,EAAQ,EAAI,IAAU,EAAM,EAI5B,MAAA,wDAFS,EAAA,gBAAgB,KAAK,QAE8B,kMAC4B,EAAO,oBAIhG,EAAA,UAAA,OAAP,SAAc,GACJ,IAAA,EAAM,SAAS,cAAc,OACnC,EAAI,UAAY,KAAK,SAChB,KAAA,QAAS,EACd,SAAS,eAAe,GAAM,KAAK,WAAW,YAAY,IAElE,EA1CA,GAAA,QAAA,QAAA;;ACFA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,IAAA,EAAA,WAoBI,SAAA,EAAY,EAAY,EAAiB,GAChC,KAAA,KAAO,EACP,KAAA,UAAY,EACZ,KAAA,MAAO,EACP,KAAA,SAEb,OApBI,EAAA,UAAA,OAAA,WACY,MAAA,gCAAgC,KAAK,KAAI,QAGrD,EAAA,UAAA,QAAA,SAAQ,GACC,KAAA,MAAM,QAAQ,kBAGvB,EAAA,UAAA,OAAA,WACU,IAAA,EAAY,SAAS,cAAc,QACzC,EAAU,UAAY,KAAK,SAC3B,EAAU,QAAU,KAAK,QAAQ,KAAK,MACtC,SAAS,eAAe,KAAK,WAAW,YAAY,IAQ5D,EA1BA,GAAA,QAAA,QAAA;;ACEA,aAAA,IAAA,EAAA,MAAA,KAAA,iBAAA,SAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,IAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAJA,IAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,YACA,EAAA,EAAA,QAAA,kBAEA,EAAA,WAeI,SAAA,EAAY,EAAU,EAAmB,EAAkB,GAClD,KAAA,GAAK,EACL,KAAA,YAAc,EACd,KAAA,OAAS,SAAS,cAAc,WACrC,IAAY,KAAK,UAAY,GAC7B,IAAY,KAAK,UAAY,GACxB,KAAA,SACC,IAAA,EAAa,KAAK,iBACrB,GAAY,KAAK,MAAM,GA2ElC,OAzFI,EAAA,UAAA,OAAA,WACY,MAAA,iGAC+C,KAAK,YAAW,oBAAoB,KAAK,YAAW,UAAS,KAAK,GAAE,uCAC7G,KAAK,YAAW,yBAAyB,KAAK,YAAW,0CAChD,KAAK,GAAE,YAalC,EAAA,UAAA,UAAA,SAAU,GACN,EAAQ,EAAM,cACV,IACA,EADA,EAAM,IAAI,eAEd,EAAI,KAAK,MAAU,EAAA,SAAQ,WAAW,GAAS,GACzC,IAAA,EAAmB,SAAS,cAAc,qBAC1C,EAAe,KAAK,aACpB,EAAS,KAAK,OAkBb,OAjBP,EAAiB,MAAM,QAAU,OACjC,EAAO,MAAM,QAAU,QACvB,EAAI,mBAAqB,SAAU,GACT,GAAlB,EAAI,aACc,KAAd,EAAI,QACJ,EAAO,KAAK,MAAM,KAAK,MAAM,EAAI,WACjC,EAAa,UAAY,GACzB,aAAa,QAAQ,QAAQ,IAE7B,EAAa,UAAY,yBAE7B,EAAiB,MAAM,QAAU,QACjC,EAAO,MAAM,QAAS,SAI9B,EAAI,KAAK,MACF,GAGX,EAAA,UAAA,MAAA,SAAM,EAAe,QAAA,IAAA,IAAA,EAAA,GACjB,SAAS,cAAc,qBAAqB,UAAU,GACtD,SAAS,cAAc,gBAAgB,UAAU,GAI5C,IAHC,IAAA,EAAO,KAAK,UAAU,GACtB,EAAsB,EAAA,gBAEnB,EAAI,EAAqB,EAAI,EAAgB,EAAqB,IAAK,CACtE,IAAA,EAAW,EAAK,MAAU,GAAJ,EAAkB,IAAT,EAAI,IACnC,EAAQ,IAAI,EAAA,QAAM,EAAU,mBAAoB,GAEhD,EAAO,EAAA,gBAAgB,GACzB,IAAA,EAAA,QAAW,EAAK,cAAc,KAK1C,EAAA,UAAA,eAAA,WACU,IAAA,EAAgB,aAAa,QAAQ,SACpC,OAAE,GAAgB,MAG7B,EAAA,UAAA,UAAA,SAAU,GACE,OAAA,EAAE,OACD,KAAA,GACI,KAAA,MAAM,KAAK,cAQ5B,EAAA,UAAA,SAAA,WACW,OAAA,KAAK,QAAQ,OAGxB,EAAA,UAAA,OAAA,SAAO,GACG,IAAA,EAAe,SAAS,eAAe,GAAM,KAAK,WAAa,QACrE,EAAa,UAAY,KAAK,SACzB,KAAA,QAAU,EAAa,cAAc,IAAI,KAAK,IAC9C,KAAA,QAAQ,UAAY,KAAK,UAAU,KAAK,MACxC,KAAA,aAAe,EAAa,cAAc,UAAU,KAAK,KAGtE,EAlGA,GAAA,QAAA,QAAA;;ACFA,aAAA,IAAA,EAAA,MAAA,KAAA,iBAAA,SAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,IAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAHA,IAAA,EAAA,EAAA,QAAA,YAGM,EAAQ,IAAI,EAAA,QAAM,UAAU,QAAQ","file":"main.9edceb0b.js","sourceRoot":"../src","sourcesContent":["export const BASE_URL = \"https://wat-plan-backend.herokuapp.com\";\n\nexport const START_DATE = new Date(2020, 1, 24);\n\nfunction toDays(date: Date): number {\n    return Math.floor(date.valueOf() / 86400000);\n}\n\nfunction addDays(date: Date, days: number) {\n    const result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n}\n\nexport function getDataOffset(): number {\n    const currDays = toDays(new Date());\n    const startDays = toDays(START_DATE);\n    return Math.floor((currDays - startDays) / 7);\n}\n\nexport function getCurrentWeeks(offset: number): string {\n    const weekOffset = + offset;\n    const startWeek = addDays(START_DATE, weekOffset * 7);\n    const endWeek = addDays(START_DATE, (weekOffset + 1) * 7);\n    return `${formatDateDDMM(startWeek)} - ${formatDateDDMM(endWeek)}`;\n}\n\nfunction formatDateDDMM(date:Date):string{\n    const mm_dd = date.toISOString().split('T')[0].slice(5);\n    const [mm,dd] = mm_dd.split('-');\n    return `${dd} ${mm}`;\n}\n","import { Krotka, domElement} from './index';\nimport { getCurrentWeeks,BASE_URL } from './helper';\n\nconst DAYS = [\"Poniedziałek\",\"Wtorek\",\"Środa\",\"Czwartek\",\"Piątek\",\"Sobota\",\"Niedziela\"];\n\nexport default class Table implements domElement {\n    insert_id: string;\n    id: string;\n    private data: Krotka[];\n    private offset:number;\n    group: string;\n    element:HTMLElement;\n\n    constructor(data:Krotka[],insert_id: string,offset:number) {\n        this.data = data;\n        this.insert_id = insert_id;\n        this.offset = offset;\n        this.inject();\n    }\n\n    render(): string {\n        let n_day = 0\n        const td = (value: string) => { return (`<td class=\"td_1\">${value}</td>`) };\n        const tr = (value: string) => { return (`<tr class=\"tr_1\">${value}</tr>`) };\n        let content = \"\";\n        for (let i = 0; i < this.data.length - 6; i += 7) {\n            let day = \"\";\n            for (let j = 0; j < 7; j++) {\n                const krotka = this.data[i + j];\n                day += td(`${krotka.title} <br class='class'>${krotka.class}</br>`);\n            }\n            content += tr(td(DAYS[n_day])+day);\n            n_day < 7 ? n_day++ : n_day=0;\n        }\n        const week = getCurrentWeeks(this.offset);\n        return (\n            `<table class=\"container\"><thead><tr><th class=\"date\">${week}</th><th>8:00 - 9:35</th><th>9:50 - 11:25 </th><th>11:40 - 13:15</th><th>13:30 - 15:05</th>\n            <th>15:45 - 17:20</th><th>17:35 - 19:10</th><th>19:25 - 21:00</th></td></thead><tbody>${content}</tbody></table>`\n        );\n    }\n\n    public inject(id?:string): void {\n        const div = document.createElement('div');\n        div.innerHTML = this.render();\n        this.element= div;\n        document.getElementById(id || this.insert_id).appendChild(div);\n    }\n}","import { domElement } from \".\";\nimport Table from \"./Table\";\n\nexport default class DatePicker implements domElement{\n    insert_id: string;\n    id: string;\n    private date:string;\n    private table:Table;\n    \n    render(): string {\n        return (`<a class=\"data_picker--link\">${this.date}</a>`);\n    }\n\n    onClick(e:EventTarget){\n        this.table.element.scrollIntoView();\n    }\n\n    inject(): void {\n        const container = document.createElement('span');\n        container.innerHTML = this.render();\n        container.onclick = this.onClick.bind(this);\n        document.getElementById(this.insert_id).appendChild(container);\n    }\n    constructor(date:string,insert_id:string,table:Table) {\n        this.date = date;\n        this.insert_id = insert_id;\n        this.table =table;\n        this.inject();\n    }\n}","import { domElement, Krotka } from \".\";\nimport {getDataOffset, BASE_URL, getCurrentWeeks} from \"./helper\";\nimport Table from \"./Table\";\nimport DatePicker from \"./DatePiceker\";\n\nexport default class Input implements domElement{\n\n    insert_id: string;\n    id: string;\n    element?:HTMLInputElement;\n    errorElement?:HTMLElement;\n    placeholder:string;\n    loader: HTMLElement;\n    \n    render(): string {\n        return (`<div class=\"form__group field\">\n        <input type=\"input\" class=\"form__field\" placeholder=\"${this.placeholder}\" value=\"\" name=\"${this.placeholder}\" id='${this.id}' required />\n        <label for=\"${this.placeholder}\" class=\"form__label\">${this.placeholder}</label>\n        </div><div id='error-${this.id}'></div>`);\n    }\n    constructor(id:string,placeholder:string,insert_id?:string,onkeydown?: (e:KeyboardEvent)=> void) {\n        this.id = id;\n        this.placeholder = placeholder;\n        this.loader = document.querySelector('.loader');\n        insert_id ? this.insert_id = insert_id : null;\n        onkeydown ? this.onKeyDown = onkeydown : null;\n        this.inject();\n        const cacheGroup = this.getCachedGroup();\n        if(cacheGroup) this.start(cacheGroup); \n    }\n\n    fetchData(group: string): Krotka[] {\n        group = group.toUpperCase();\n        let req = new XMLHttpRequest();\n        let data: Krotka[];\n        req.open('GET', `${BASE_URL}/?group=${group}`, false);\n        const tables_container = document.querySelector('#tables_container') as HTMLElement; \n        const errorElement = this.errorElement;\n        const loader = this.loader;\n        tables_container.style.display = 'none';  \n        loader.style.display = 'block';\n        req.onreadystatechange = function (aEvt) {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    data = JSON.parse(JSON.parse(req.response));\n                    errorElement.innerHTML = '';\n                    localStorage.setItem('group',group);\n                } else {\n                    errorElement.innerHTML = 'Nie ma takiej grupy :/';\n                }\n                tables_container.style.display = 'block';\n                loader.style.display= 'none';\n            }\n        }\n\n        req.send(null);\n        return data;\n    }\n\n    start(group: string, numberOfWeeks: number = 7): void {\n        document.querySelector('#tables_container').innerHTML=\"\";\n        document.querySelector('#data_picker').innerHTML=\"\";\n        const data = this.fetchData(group);\n        const offsetNumberOfWeeks = getDataOffset();\n    \n        for (let i = offsetNumberOfWeeks; i < numberOfWeeks + offsetNumberOfWeeks; i++) {    \n            const weekData = data.slice(i * 49, (i + 1) * 49);\n            const table = new Table(weekData, 'tables_container', i);\n\n            const date = getCurrentWeeks(i);\n            new DatePicker(date,'data_picker',table);\n        }\n\n    }\n\n    getCachedGroup():string | null {\n        const group:string =  localStorage.getItem('group');\n        return !!group ? group : null;\n    }\n\n    onKeyDown(e:KeyboardEvent):void{\n        switch (e.which) {\n            case 13:\n                this.start(this.getValue());\n                break;\n        \n            default:\n                break;\n        }\n    }\n\n    getValue():string{\n        return this.element.value;\n    }\n\n    inject(id?:string): void {  \n        const outerElement = document.getElementById(id || this.insert_id || 'body');\n        outerElement.innerHTML = this.render();\n        this.element = outerElement.querySelector(`#${this.id}`);\n        this.element.onkeydown = this.onKeyDown.bind(this);\n        this.errorElement = outerElement.querySelector(`#error-${this.id}`);\n    }\n\n}","import Input from './Input';\n\n\nconst input = new Input('input_1','Grupa','search_bar');\n\n\n\n\n"]}